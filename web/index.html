<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Measurely ‚Äì Dashboard</title>
  <link rel="stylesheet" href="measurely.css">
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/plotly.js/3.0.3/plotly.min.js"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <!-- =====  SMALL INLINE STYLES  ===== -->
  <style>
    .plot-container { background: transparent !important; }
    .modebar { display: none !important; }
    .card-sky   { background-color: #f0f9ff; }
    .card-amber { background-color: #fffbeb; }

    .progress-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 4px;
      background: rgba(0,0,0,0.1);
      z-index: 1000;
      opacity: 0;
      transition: opacity 0.3s;
    }
    .progress-container.active { opacity: 1; }
    .progress-bar {
      height: 100%;
      background: linear-gradient(90deg, #3b82f6, #1d4ed8);
      width: 0%;
      transition: width 0.3s ease;
    }

    /* =====  CHART  ===== */
    #frequencyChart {
      height: 360px;
      background: #f3f4f6;
      border-radius: 8px;
    }

    /* thick, high-contrast traces */
    #frequencyChart .scatterlayer path {
      stroke-width: 3.5 !important;
      stroke: #6D28D9 !important;           /* left  */
    }
    #frequencyChart .scatterlayer g:nth-of-type(2) path {
      stroke: #3B82F6 !important;           /* right */
    }

    /* =====  MOBILE CHART  ===== */
    @media (max-width: 640px) {
      #frequencyChart {
        height: 240px;              /* shorter canvas */
      }
      #frequencyChart .scatterlayer path {
        stroke-width: 4 !important; /* fatter lines */
      }
      #frequencyChart .xtitle,
      #frequencyChart .ytitle {
        font-size: 0.75rem !important; /* smaller axis labels */
      }
      #frequencyChart .xtick text,
      #frequencyChart .ytick text {
        font-size: 0.65rem !important;
      }
    }

  </style>

<base target="_blank">
</head>

<body class="bg-gray-50">

  <!-- Progress bar (hidden by default) -->
  <div id="progressContainer" class="fixed top-4 left-1/2 -translate-x-1/2 w-80 bg-white/90 backdrop-blur rounded-lg shadow-lg p-3 hidden z-50">
    <div class="flex items-center justify-between mb-2">
      <span class="text-sm font-medium text-gray-700">Running sweep...</span>
      <span id="progressPercent" class="text-sm text-gray-600">0%</span>
    </div>
    <div class="w-full bg-gray-200 rounded-full h-2.5">
      <div id="progressBar" class="bg-green-600 h-2.5 rounded-full" style="width: 0%"></div>
    </div>
  </div>


  <!-- =====  HEADER / MENU  ===== -->
  <div id="sidebar-overlay" class="sidebar-overlay"></div>

  <aside id="sidebar" class="sidebar gradient-bg fixed top-0 right-0 h-full w-64 text-white p-6 z-40">
    <div class="sidebar-logo mb-8 flex items-center space-x-3">
      <img src="buddy-icon-100-white.svg" class="w-12 h-12" alt="Measurely Buddy">
      <div>
        <h1 class="text-2xl font-bold">Measurely</h1>
        <p class="text-sm opacity-80">Simple Room Audio</p>
      </div>
    </div>
    <nav class="space-y-2">
      <a href="index.html" class="nav-item active"><i class="fas fa-chart-line mr-3"></i>Dashboard</a>
      <a href="recommendations.html" class="nav-item"><i class="fas fa-lightbulb mr-3"></i>Recommendations</a>
      <a href="room-setup.html" class="nav-item"><i class="fas fa-home mr-3"></i>Room Setup</a>
      <a href="sessions.html" class="nav-item"><i class="fas fa-history mr-3"></i>Sessions</a>
      <a href="settings.html" class="nav-item"><i class="fas fa-cog mr-3"></i>Settings</a>
    </nav>
    <div class="absolute bottom-6 left-6 right-6">
      <div class="bg-white bg-opacity-20 rounded-lg p-4">
        <div class="flex items-center mb-2">
          <div id="deviceStatusIndicator" class="status-indicator status-good pulse-animation"></div>
          <span id="deviceStatusText" class="text-sm">System Ready</span>
        </div>
        <p class="text-xs opacity-80">Last updated: <span id="lastUpdated">Now</span></p>
      </div>
    </div>
  </aside>

  <!-- =====  MAIN CONTENT  ===== -->
  <div class="main-content md:ml-64 p-8">

    <!-- Page Title -->
    <div class="section-block">
      <h2 class="section-title-dashboard">Your Room Overview</h2>
      <p class="section-subtitle">A quick, clear snapshot of how your space is sounding today.</p>
    </div>

    <!-- THREE-CARD TOP ROW -->
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">

      <!-- 1: Welcome to Measurely -->
      <div class="bg-white rounded-2xl shadow-lg p-6 flex flex-col justify-between">

        <h3 class="card-header">
          <img src="buddy-icon-100.svg" class="w-6 h-6" alt="Measurely Buddy">
          Welcome to Measurely
        </h3>

        <p class="text-sm text-gray-600 leading-relaxed mt-2">
          Hi, I‚Äôm Dave. I‚Äôll drop in with little tips as you go.
          I keep an eye on your room size and speaker behaviour during each sweep, 
          and I‚Äôll help you nudge things into place for the best listening experience‚Äîone step at a time.
        </p>

      </div>


      <!-- 2: Overall Score -->
      <div class="bg-white rounded-2xl shadow-lg p-6 flex flex-col justify-between">

        <h3 class="card-header">
          <span class="text-indigo-500">üìä</span>
          Your overall score
        </h3>

        <div id="overallScore"
            class="font-bold text-indigo-600 mb-1"
            style="font-size: clamp(4rem, 8vw, 8rem); line-height: 1;">
          --
        </div>

        <div class="flex items-center text-sm text-gray-600 mt-2">
          <span id="overallStatus" class="status-indicator mr-2"></span>
          <span id="overallStatusText">Loading‚Ä¶</span>
        </div>

      </div>

      <!-- 3: Buddy Phrase Card -->
      <div id="buddySaysCard" class="bg-white rounded-2xl shadow-lg p-6 flex flex-col">

        <h3 class="card-header">
          <img src="buddy-icon-100.svg" class="w-6 h-6" alt="Measurely Buddy">
          Dave says
        </h3>

        <!-- Buddy phrase in light grey box -->
        <div class="bg-gray-100 rounded-lg p-3 mt-2">
          <p id="overallBuddyPhrase"
            class="text-gray-800 text-base leading-snug italic">
            ‚Ä¶
          </p>
        </div>
      </div>
    </div>

<!-- Scores Section Header -->
<div class="section-block mt-10 mb-4">
  <h2 class="section-title-dashboard">How we score</h2>
    <p class="section-subtitle">A quick guide to what your numbers mean at a glance.</p>

</div>

<!-- Scores Key Card -->
<div id="scoreKeyCard" class="bg-white rounded-xl shadow p-4 mb-8">

  <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-sm">

    <!-- Excellent -->
    <div class="flex items-center">
      <span class="w-4 h-4 rounded-full bg-green-500 mr-3"></span>
      <div>
        <p class="font-semibold text-gray-900">Excellent</p>
        <p class="text-gray-600 text-xs">8‚Äì10</p>
      </div>
    </div>

    <!-- Good -->
    <div class="flex items-center">
      <span class="w-4 h-4 rounded-full bg-yellow-500 mr-3"></span>
      <div>
        <p class="font-semibold text-gray-900">Good</p>
        <p class="text-gray-600 text-xs">6‚Äì7.9</p>
      </div>
    </div>

    <!-- Okay -->
    <div class="flex items-center">
      <span class="w-4 h-4 rounded-full bg-orange-500 mr-3"></span>
      <div>
        <p class="font-semibold text-gray-900">Okay</p>
        <p class="text-gray-600 text-xs">4‚Äì5.9</p>
      </div>
    </div>

    <!-- Needs Work -->
    <div class="flex items-center">
      <span class="w-4 h-4 rounded-full bg-red-500 mr-3"></span>
      <div>
        <p class="font-semibold text-gray-900">Needs work</p>
        <p class="text-gray-600 text-xs">0‚Äì3.9</p>
      </div>
    </div>

  </div>

</div>


<!-- SECTION: Detailed Room Metrics -->
<div class="mt-12 mb-6">
  <h2 class="text-3xl font-bold text-gray-800 mb-2">Room details</h2>
  <p class="section-subtitle">A simple look at how your room is behaving.</p>
</div>

<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">

  <!-- 1. Peaks & Dips -->
  <div class="bg-white rounded-2xl shadow-lg p-6 card-hover relative">

    <div class="flex items-center justify-between mb-4">
      <h4 class="text-lg font-semibold text-gray-800">Peaks & Dips</h4>
      <i class="fas fa-mountain text-xl" data-color-icon="peaksDips"></i>
    </div>

    <div id="peaksDipsScore"
         class="text-3xl font-bold mb-1"
         data-color-target="peaksDips">--</div>

    <div id="peaksDipsSummary"
         class="text-sm mb-2"
         data-color-summary="peaksDips">--</div>

    <!-- Buddy box -->
    <div class="flex items-start bg-gray-100 rounded-lg p-2 text-xs text-gray-700 mb-3">
      <img src="buddy-icon-100.svg"
           class="w-4 h-4 mr-2 opacity-90 mt-0.5"
           alt="Buddy tip">
      <span id="peaksDipsBuddy" class="italic">--</span>
    </div>

    <!-- Status -->
    <div class="mt-4">
      <div class="flex items-center text-xs mb-1">
        <span id="peaksDipsStatus" class="w-3 h-3 rounded-full mr-2"></span>
        <span id="peaksDipsStatusText" data-color-summary="peaksDips">--</span>
      </div>
      <div id="peaksDipsFoot" class="text-xs text-gray-400 mb-2"></div>
    </div>

    <button type="button"
            class="absolute bottom-4 right-4 text-gray-400 hover:text-gray-600"
            onclick="togglePopup('popup-peaks')">
      <i class="fas fa-info-circle"></i>
    </button>

    <div id="popup-peaks"
         class="hidden absolute bottom-full right-0 mb-2 w-64
         bg-gray-800 text-white text-xs rounded-lg p-3 shadow-xl z-50">
      Certain notes jump out or disappear. Small speaker moves usually calm these.
    </div>
  </div>


  <!-- 2. Reflections -->
  <div class="bg-white rounded-2xl shadow-lg p-6 card-hover relative">

    <div class="flex items-center justify-between mb-4">
      <h4 class="text-lg font-semibold text-gray-800">Reflections</h4>
      <i class="fas fa-square-caret-left text-xl" data-color-icon="reflections"></i>
    </div>

    <div id="reflectionsScore"
         class="text-3xl font-bold mb-1"
         data-color-target="reflections">--</div>

    <div id="reflectionsSummary"
         class="text-sm mb-2"
         data-color-summary="reflections">--</div>

    <div class="flex items-start bg-gray-100 rounded-lg p-2 text-xs text-gray-700 mb-3">
      <img src="buddy-icon-100.svg" class="w-4 h-4 mr-2 opacity-90 mt-0.5" alt="Buddy tip">
      <span id="reflectionsBuddy" class="italic">--</span>
    </div>

    <div class="mt-4">
      <div class="flex items-center text-xs mb-1">
        <span id="reflectionsStatus" class="w-3 h-3 rounded-full mr-2"></span>
        <span id="reflectionsStatusText" data-color-summary="reflections">--</span>
      </div>
      <div id="reflectionsFoot" class="text-xs text-gray-400 mb-2"></div>
    </div>

    <button type="button"
            class="absolute bottom-4 right-4 text-gray-400 hover:text-gray-600"
            onclick="togglePopup('popup-reflections')">
      <i class="fas fa-info-circle"></i>
    </button>

    <div id="popup-reflections"
         class="hidden absolute bottom-full right-0 mb-2 w-64
         bg-gray-800 text-white text-xs rounded-lg p-3 shadow-xl z-50">
      Hard surfaces bounce sound around and blur detail. Rugs and curtains tame this quickly.
    </div>
  </div>


  <!-- 3. Bandwidth -->
  <div class="bg-white rounded-2xl shadow-lg p-6 card-hover relative">

    <div class="flex items-center justify-between mb-4">
      <h4 class="text-lg font-semibold text-gray-800">Bandwidth</h4>
      <i class="fas fa-signal text-xl" data-color-icon="bandwidth"></i>
    </div>

    <div id="bandwidthScore"
         class="text-3xl font-bold mb-1"
         data-color-target="bandwidth">--</div>

    <div id="bandwidthSummary"
         class="text-sm mb-2"
         data-color-summary="bandwidth">--</div>

    <div class="flex items-start bg-gray-100 rounded-lg p-2 text-xs text-gray-700 mb-3">
      <img src="buddy-icon-100.svg" class="w-4 h-4 mr-2 opacity-90 mt-0.5" alt="Buddy tip">
      <span id="bandwidthBuddy" class="italic">--</span>
    </div>

    <div class="mt-4">
      <div class="flex items-center text-xs mb-1">
        <span id="bandwidthStatus" class="w-3 h-3 rounded-full mr-2"></span>
        <span id="bandwidthStatusText" data-color-summary="bandwidth">--</span>
      </div>
      <div id="bandwidthFoot" class="text-xs text-gray-400 mb-2"></div>
    </div>

    <button type="button"
            class="absolute bottom-4 right-4 text-gray-400 hover:text-gray-600"
            onclick="togglePopup('popup-bandwidth')">
      <i class="fas fa-info-circle"></i>
    </button>

    <div id="popup-bandwidth"
         class="hidden absolute bottom-full right-0 mb-2 w-64
         bg-gray-800 text-white text-xs rounded-lg p-3 shadow-xl z-50">
      Shows how low and high your system reaches. More range = more impact and sparkle.
    </div>
  </div>


  <!-- 4. Balance -->
  <div class="bg-white rounded-2xl shadow-lg p-6 card-hover relative">

    <div class="flex items-center justify-between mb-4">
      <h4 class="text-lg font-semibold text-gray-800">Balance</h4>
      <i class="fas fa-balance-scale text-xl" data-color-icon="balance"></i>
    </div>

    <div id="balanceScore"
         class="text-3xl font-bold mb-1"
         data-color-target="balance">--</div>

    <div id="balanceSummary"
         class="text-sm mb-2"
         data-color-summary="balance">--</div>

    <div class="flex items-start bg-gray-100 rounded-lg p-2 text-xs text-gray-700 mb-3">
      <img src="buddy-icon-100.svg" class="w-4 h-4 mr-2 opacity-90 mt-0.5" alt="Buddy tip">
      <span id="balanceBuddy" class="italic">--</span>
    </div>

    <div class="mt-4">
      <div class="flex items-center text-xs mb-1">
        <span id="balanceStatus" class="w-3 h-3 rounded-full mr-2"></span>
        <span id="balanceStatusText" data-color-summary="balance">--</span>
      </div>
      <div id="balanceFoot" class="text-xs text-gray-400 mb-2"></div>
    </div>

    <button type="button"
            class="absolute bottom-4 right-4 text-gray-400 hover:text-gray-600"
            onclick="togglePopup('popup-balance')">
      <i class="fas fa-info-circle"></i>
    </button>

    <div id="popup-balance"
         class="hidden absolute bottom-full right-0 mb-2 w-64
         bg-gray-800 text-white text-xs rounded-lg p-3 shadow-xl z-50">
      Checks if lows, mids and highs are playing evenly. Small moves often fix this fast.
    </div>
  </div>


  <!-- 5. Smoothness -->
  <div class="bg-white rounded-2xl shadow-lg p-6 card-hover relative">

    <div class="flex items-center justify-between mb-4">
      <h4 class="text-lg font-semibold text-gray-800">Smoothness</h4>
      <i class="fas fa-wave-square text-xl" data-color-icon="smoothness"></i>
    </div>

    <div id="smoothnessScore"
         class="text-3xl font-bold mb-1"
         data-color-target="smoothness">--</div>

    <div id="smoothnessSummary"
         class="text-sm mb-2"
         data-color-summary="smoothness">--</div>

    <div class="flex items-start bg-gray-100 rounded-lg p-2 text-xs text-gray-700 mb-3">
      <img src="buddy-icon-100.svg" class="w-4 h-4 mr-2 opacity-90 mt-0.5" alt="Buddy tip">
      <span id="smoothnessBuddy" class="italic">--</span>
    </div>

    <div class="mt-4">
      <div class="flex items-center text-xs mb-1">
        <span id="smoothnessStatus" class="w-3 h-3 rounded-full mr-2"></span>
        <span id="smoothnessStatusText" data-color-summary="smoothness">--</span>
      </div>
      <div id="smoothnessFoot" class="text-xs text-gray-400 mb-2"></div>
    </div>

    <button type="button"
            class="absolute bottom-4 right-4 text-gray-400 hover:text-gray-600"
            onclick="togglePopup('popup-smoothness')">
      <i class="fas fa-info-circle"></i>
    </button>

    <div id="popup-smoothness"
         class="hidden absolute bottom-full right-0 mb-2 w-64
         bg-gray-800 text-white text-xs rounded-lg p-3 shadow-xl z-50">
      Measures how even your sound is across frequencies. Smoother = more natural.
    </div>
  </div>


  <!-- 6. Reverb -->
  <div class="bg-white rounded-2xl shadow-lg p-6 card-hover relative">

    <div class="flex items-center justify-between mb-4">
      <h4 class="text-lg font-semibold text-gray-800">Reverb</h4>
      <i class="fas fa-clock text-xl" data-color-icon="reverb"></i>
    </div>

    <div id="reverbScore"
         class="text-3xl font-bold mb-1"
         data-color-target="reverb">--</div>

    <div id="reverbSummary"
         class="text-sm mb-2"
         data-color-summary="reverb">--</div>

    <div class="flex items-start bg-gray-100 rounded-lg p-2 text-xs text-gray-700 mb-3">
      <img src="buddy-icon-100.svg" class="w-4 h-4 mr-2 opacity-90 mt-0.5" alt="Buddy tip">
      <span id="reverbBuddy" class="italic">--</span>
    </div>

    <div class="mt-4">
      <div class="flex items-center text-xs mb-1">
        <span id="reverbStatus" class="w-3 h-3 rounded-full mr-2"></span>
        <span id="reverbStatusText" data-color-summary="reverb">--</span>
      </div>
      <div id="reverbFoot" class="text-xs text-gray-400 mb-2"></div>
    </div>

    <button type="button"
            class="absolute bottom-4 right-4 text-gray-400 hover:text-gray-600"
            onclick="togglePopup('popup-reverb')">
      <i class="fas fa-info-circle"></i>
    </button>

    <div id="popup-reverb"
         class="hidden absolute bottom-full right-0 mb-2 w-64
         bg-gray-800 text-white text-xs rounded-lg p-3 shadow-xl z-50">
      Shows how long your room holds onto sound. Shorter usually means a cleaner listen.
    </div>
  </div>

</div>

<!-- SECTION: Detailed Room Metrics -->
<div class="mt-12 mb-6">
  <h2 class="text-3xl font-bold text-gray-800 mb-2">What we heard in your room</h2>
  <p class="section-subtitle">Here‚Äôs how your room shapes the sound, split into the four parts you actually hear: bass, mids, treble, and air.</p>
</div>

<!-- Detailed Analysis (Improved, Friendlier) -->
<div class="bg-white rounded-2xl shadow-lg p-8 mb-8">

  <!-- 4 big numbers + bars -->
  <div class="grid grid-cols-2 md:grid-cols-4 gap-6 mb-8 text-center">

    <!-- Bass -->
    <div>
      <div id="bassLevel" class="text-3xl font-bold text-blue-600 mb-1">-- dB</div>
      <div class="text-sm text-gray-600 mb-2">Bass (20‚Äì200 Hz)</div>
      <div class="w-full bg-gray-200 rounded h-2">
        <div id="bassBar" class="h-2 rounded bg-blue-500" style="width: 0%"></div>
      </div>
      <p class="text-xs text-gray-500 mt-2">The punch and weight in the room.</p>
    </div>

    <!-- Mid -->
    <div>
      <div id="midLevel" class="text-3xl font-bold text-green-600 mb-1">-- dB</div>
      <div class="text-sm text-gray-600 mb-2">Mid (200‚Äì2 kHz)</div>
      <div class="w-full bg-gray-200 rounded h-2">
        <div id="midBar" class="h-2 rounded bg-green-500" style="width: 0%"></div>
      </div>
      <p class="text-xs text-gray-500 mt-2">Vocals, guitars, the ‚Äúmeat‚Äù of the music.</p>
    </div>

    <!-- Treble -->
    <div>
      <div id="trebleLevel" class="text-3xl font-bold text-yellow-600 mb-1">-- dB</div>
      <div class="text-sm text-gray-600 mb-2">Treble (2‚Äì10 kHz)</div>
      <div class="w-full bg-gray-200 rounded h-2">
        <div id="trebleBar" class="h-2 rounded bg-yellow-500" style="width: 0%"></div>
      </div>
      <p class="text-xs text-gray-500 mt-2">Cymbals, clarity, sparkle.</p>
    </div>

    <!-- Air -->
    <div>
      <div id="airLevel" class="text-3xl font-bold text-purple-600 mb-1">-- dB</div>
      <div class="text-sm text-gray-600 mb-2">Air (10‚Äì20 kHz)</div>
      <div class="w-full bg-gray-200 rounded h-2">
        <div id="airBar" class="h-2 rounded bg-purple-500" style="width: 0%"></div>
      </div>
      <p class="text-xs text-gray-500 mt-2">Sense of space and openness.</p>
    </div>

  </div>


      <!-- Quick Listen Guide -->
      <div class="bg-gray-50 rounded-lg p-4">
        <h4 class="font-semibold text-gray-800 mb-2">Quick Listen Guide</h4>
        <ul class="text-sm text-gray-600 space-y-1 list-disc list-inside">

          <li>
            <span class="font-medium text-blue-600">Bass thin?</span>
            Speakers too close to the wall ‚Üí pull them forward a touch.
          </li>

          <li>
            <span class="font-medium text-green-600">Vocals too shouty?</span>
            Room reflections ‚Üí try a rug or small toe-in.
          </li>

          <li>
            <span class="font-medium text-yellow-600">Treble dull?</span>
            Tweeters below ear height ‚Üí lift stands or reduce heavy curtains.
          </li>

          <li>
            <span class="font-medium text-purple-600">Missing ‚Äúair‚Äù?</span>
            Add something reflective or open behind your seat, or try a diffuser.
          </li>

        </ul>
      </div>
    </div>

<!-- SECTION: Detailed Room Metrics -->
<div class="mt-12 mb-6">
  <h2 class="text-3xl font-bold text-gray-800 mb-2">The nerd section</h2>
  <p class="section-subtitle">Uncover the differences and fine tune your sound.</p>
</div>

<!-- SECTION: Left & Right Sound Comparison -->
<div class="bg-white rounded-2xl shadow-lg p-8 mb-8">

  <!-- Heading + Channel Buttons -->
  <div class="flex items-center justify-between mb-4">
    <h3 class="text-xl font-semibold">Left and right sound comparison.</h3>

    <div class="chart-btn-group flex gap-2">

      <!-- LEFT BUTTON -->
      <button
        id="leftChannelBtn"
        data-channel="left"
        class="channel-btn px-4 py-2 rounded-lg text-sm text-white transition-all"
        style="background-color:#6D28D9;">
        <i class="fas fa-chart-line mr-2"></i>Left Channel
      </button>

      <!-- RIGHT BUTTON -->
      <button
        id="rightChannelBtn"
        data-channel="right"
        class="channel-btn px-4 py-2 rounded-lg text-sm text-white transition-all"
        style="background-color:#3B82F6;">
        <i class="fas fa-chart-line mr-2"></i>Right Channel
      </button>

      <!-- BOTH BUTTON -->
      <button
        id="bothChannelsBtn"
        data-channel="both"
        class="channel-btn px-4 py-2 rounded-lg text-sm transition-all channel-active bg-gray-200 hover:bg-gray-300">
        <i class="fas fa-chart-line mr-2"></i>Both Channels
      </button>

    </div>
  </div>

  <!-- CHART -->
  <div id="frequencyChart" class="chart-responsive"></div>

  <!-- SESSION SELECTOR -->
  <div class="bg-gray-50 rounded-xl p-4 mt-6">
    <h4 class="text-lg font-semibold text-gray-800 mb-3">Compare Your Sessions</h4>

    <!-- Buttons -->
    <div class="flex flex-wrap gap-6 text-sm mb-4">

      <button id="sessionLatestBtn"
        class="session-btn underline text-blue-700 hover:text-blue-900 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded">
        Latest
      </button>

      <button id="sessionPreviousBtn"
        class="session-btn underline text-blue-700 hover:text-blue-900 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded">
        Previous
      </button>

      <button id="sessionLastBtn"
        class="session-btn underline text-blue-700 hover:text-blue-900 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded">
        Last
      </button>

    </div>

    <!-- MINI METRICS (PLACEHOLDERS FOR NOW) -->
    <div id="sessionMetrics" class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-3">

      <div class="p-3 bg-white rounded-lg shadow-sm text-center">
        <p class="text-xs text-gray-500">Peak Level</p>
        <p id="metricPeak" class="text-lg font-semibold text-indigo-600">-- dB</p>
      </div>

      <div class="p-3 bg-white rounded-lg shadow-sm text-center">
        <p class="text-xs text-gray-500">Deepest Dip</p>
        <p id="metricDip" class="text-lg font-semibold text-red-600">-- dB</p>
      </div>

      <div class="p-3 bg-white rounded-lg shadow-sm text-center">
        <p class="text-xs text-gray-500">L/R Mismatch</p>
        <p id="metricLR" class="text-lg font-semibold text-purple-600">-- dB</p>
      </div>

      <div class="p-3 bg-white rounded-lg shadow-sm text-center">
        <p class="text-xs text-gray-500">Midrange Avg</p>
        <p id="metricMid" class="text-lg font-semibold text-blue-600">-- dB</p>
      </div>

    </div>

    <p class="text-xs text-gray-500">
      Switch between your three most recent measurements.<br>
      These stats and the chart update instantly when you click.
    </p>
  </div>


</div>


    <!-- Action Buttons -->
    <div class="flex flex-wrap gap-4">
      <button id="runSweepBtn" class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-semibold transition-all flex items-center"><i class="fas fa-play mr-2"></i>Quick Sweep</button>
      <button class="bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg font-semibold transition-all flex items-center" id="saveResultsBtn"><i class="fas fa-save mr-2"></i>Save Results</button>
      <button class="bg-purple-600 hover:bg-purple-700 text-white px-6 py-3 rounded-lg font-semibold transition-all flex items-center" id="exportReportBtn"><i class="fas fa-share mr-2"></i>Export Report</button>
    </div>
  </div>

  <!-- =====  JAVASCRIPT  ===== -->
  <script src="/js/dashboard.js"></script>
  <script>
    const btn  = document.getElementById('mobile-menu-btn');
    const side = document.getElementById('sidebar');
    const over = document.getElementById('sidebar-overlay');

    function toggleMenu() {
      side.classList.toggle('active');
      over.classList.toggle('active');
      document.body.style.overflow = side.classList.contains('active') ? 'hidden' : '';
    }
    btn.addEventListener('click', toggleMenu);
    over.addEventListener('click', toggleMenu);

    function togglePopup(id) {
      document.getElementById(id).classList.toggle('hidden');
    }

    document.querySelectorAll('.nav-item').forEach(link => {
      link.addEventListener('click', () => {
        if (window.innerWidth <= 768) {
          side.classList.remove('active');
          over.classList.remove('active');
          document.body.style.overflow = '';
        }
      });
    });

    // Update last updated time every second
    setInterval(() => {
      const el = document.getElementById('lastUpdated');
      if (el) el.textContent = new Date().toLocaleTimeString();
    }, 1000);
  </script>
</body>
</html>