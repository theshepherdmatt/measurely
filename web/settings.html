<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Measurely â€“ Settings</title>
  <link rel="stylesheet" href="measurely.css">
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>

<body class="bg-gray-50">
  <!-- Mobile Menu (right) -->
  <button class="mobile-menu-button fixed top-4 right-4 z-50 p-2 rounded-lg" id="mobile-menu-btn">
    <i class="fas fa-bars text-white text-xl"></i>
  </button>

  <div class="sidebar-overlay" id="sidebar-overlay"></div>

  <!-- Sidebar -->
  <div class="sidebar gradient-bg fixed top-0 right-0 h-full w-64 text-white p-6 z-40" id="sidebar">
    <div class="mb-8">
      <h1 class="text-2xl font-bold mb-2">Measurely</h1>
      <p class="text-sm opacity-80">Room Acoustic Analysis</p>
    </div>

    <nav class="space-y-2">
      <a href="index.html" class="nav-item"><i class="fas fa-chart-line mr-3"></i>Dashboard</a>
      <a href="analysis.html" class="nav-item"><i class="fas fa-wave-square mr-3"></i>Frequency Analysis</a>
      <a href="recommendations.html" class="nav-item"><i class="fas fa-lightbulb mr-3"></i>Recommendations</a>
      <a href="room-setup.html" class="nav-item"><i class="fas fa-home mr-3"></i>Room Setup</a>
      <a href="sessions.html" class="nav-item"><i class="fas fa-history mr-3"></i>Sessions</a>
      <a href="settings.html" class="nav-item active"><i class="fas fa-cog mr-3"></i>Settings</a>
    </nav>

    <div class="absolute bottom-6 left-6 right-6">
      <div class="bg-white bg-opacity-20 rounded-lg p-4">
        <div class="flex items-center mb-2">
          <div class="status-indicator status-good pulse-animation" id="deviceStatusIndicator"></div>
          <span class="text-sm" id="deviceStatusText">System Ready</span>
        </div>
        <p class="text-xs opacity-80">Last updated: <span id="lastUpdated">Now</span></p>
      </div>
    </div>
  </div>

  <!-- Main Content -->
  <div class="main-content ml-64 p-8">
    <div class="mb-8">
      <h2 class="text-3xl font-bold text-gray-800 mb-2">Settings</h2>
      <p class="text-gray-600">Configure your Measurely system preferences and measurement parameters</p>
    </div>

    <!-- Measurement Settings -->
    <div class="bg-white rounded-2xl shadow-lg p-6 mb-8">
      <h3 class="text-lg font-semibold text-gray-800 mb-4"><i class="fas fa-sliders-h mr-2"></i>Measurement Settings</h3>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">Frequency Range (Hz)</label>
          <div class="flex space-x-2">
            <input type="number" class="input-field flex-1" placeholder="20" value="20">
            <span class="self-center text-gray-600">to</span>
            <input type="number" class="input-field flex-1" placeholder="20000" value="20000">
          </div>
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">Measurement Points</label>
          <select class="select-field w-full">
            <option value="256">256 points (Fast)</option>
            <option value="512" selected>512 points (Standard)</option>
            <option value="1024">1024 points (High Res)</option>
            <option value="2048">2048 points (Ultra High Res)</option>
          </select>
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">Sweep Duration</label>
          <select class="select-field w-full">
            <option value="1">1 second (Fast)</option>
            <option value="2" selected>2 seconds (Standard)</option>
            <option value="4">4 seconds (Precise)</option>
            <option value="8">8 seconds (High Precision)</option>
          </select>
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">Signal Level</label>
          <input type="range" min="-20" max="0" value="-12" class="w-full" id="signal-level">
          <div class="text-center text-sm text-gray-600 mt-1"><span id="signal-level-value">-12</span> dBFS</div>
        </div>
      </div>
    </div>

    <!-- Audio Device Settings -->
    <div class="bg-white rounded-2xl shadow-lg p-6 mb-8">
      <h3 class="text-lg font-semibold text-gray-800 mb-4"><i class="fas fa-microphone mr-2"></i>Audio Device Settings</h3>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">Input Device</label>
          <select class="select-field w-full">
            <option value="default">Default System Input</option>
            <option value="mic1">USB Microphone (Audio Interface)</option>
            <option value="mic2">Measurement Microphone (Calibration)</option>
            <option value="line1">Line Input 1</option>
          </select>
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">Output Device</label>
          <select class="select-field w-full">
            <option value="default">Default System Output</option>
            <option value="speakers1">Studio Monitors</option>
            <option value="speakers2">Home Theater System</option>
            <option value="headphones">Headphones</option>
          </select>
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">Sample Rate</label>
          <select class="select-field w-full">
            <option value="44100">44.1 kHz</option>
            <option value="48000" selected>48 kHz</option>
            <option value="96000">96 kHz</option>
            <option value="192000">192 kHz</option>
          </select>
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">Buffer Size</label>
          <select class="select-field w-full">
            <option value="128">128 samples (Low Latency)</option>
            <option value="256" selected>256 samples (Balanced)</option>
            <option value="512">512 samples (Stable)</option>
            <option value="1024">1024 samples (Safe)</option>
          </select>
        </div>
      </div>
    </div>

    <!-- Display Settings -->
    <div class="bg-white rounded-2xl shadow-lg p-6 mb-8">
      <h3 class="text-lg font-semibold text-gray-800 mb-4"><i class="fas fa-desktop mr-2"></i>Display Settings</h3>
      <div class="space-y-4">
        <setting-toggle label="Dark Mode" sub="Use dark theme for all interfaces" active></setting-toggle>
        <setting-toggle label="Show Grid Lines" sub="Display grid lines on frequency response charts" active></setting-toggle>
        <setting-toggle label="Auto-refresh" sub="Automatically refresh device status every 5 seconds" active></setting-toggle>
        <setting-toggle label="Sound Notifications" sub="Play sound when sweep completes"></setting-toggle>
      </div>
    </div>

    <!-- Data Management -->
    <div class="bg-white rounded-2xl shadow-lg p-6 mb-8">
      <h3 class="text-lg font-semibold text-gray-800 mb-4"><i class="fas fa-database mr-2"></i>Data Management</h3>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
        <div class="bg-gray-50 p-4 rounded-lg"><div class="text-sm text-gray-600">Storage Usage</div><div class="text-2xl font-bold text-gray-800">2.4 GB</div><div class="text-xs text-gray-500">Session data and measurements</div></div>
        <div class="bg-gray-50 p-4 rounded-lg"><div class="text-sm text-gray-600">Sessions Stored</div><div class="text-2xl font-bold text-gray-800">47</div><div class="text-xs text-gray-500">Total measurement sessions</div></div>
      </div>
      <div class="flex flex-wrap gap-3">
        <button class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg" onclick="exportAllData()"><i class="fas fa-download mr-2"></i>Export All Data</button>
        <button class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg" onclick="importData()"><i class="fas fa-upload mr-2"></i>Import Data</button>
        <button class="bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg" onclick="clearAllData()"><i class="fas fa-trash mr-2"></i>Clear All Data</button>
      </div>
    </div>

    <!-- System Information -->
    <div class="bg-white rounded-2xl shadow-lg p-6">
      <h3 class="text-lg font-semibold text-gray-800 mb-4"><i class="fas fa-info-circle mr-2"></i>System Information</h3>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
        <div><div class="text-gray-600">Application Version</div><div class="text-gray-800 font-medium">Measurely v2.1.0</div></div>
        <div><div class="text-gray-600">Last Updated</div><div class="text-gray-800 font-medium">November 9, 2025</div></div>
        <div><div class="text-gray-600">Python Version</div><div class="text-gray-800 font-medium">3.9.7</div></div>
        <div><div class="text-gray-600">Audio Backend</div><div class="text-gray-800 font-medium">PortAudio v19.7.0</div></div>
      </div>
      <div class="mt-6">
        <button class="bg-gray-200 hover:bg-gray-300 text-gray-800 px-4 py-2 rounded-lg" onclick="checkForUpdates()"><i class="fas fa-sync-alt mr-2"></i>Check for Updates</button>
      </div>
    </div>
  </div>

  <script>
    const btn  = document.getElementById('mobile-menu-btn');
    const side = document.getElementById('sidebar');
    const over = document.getElementById('sidebar-overlay');

    function toggleMenu() {
      side.classList.toggle('active');
      over.classList.toggle('active');
      document.body.style.overflow = side.classList.contains('active') ? 'hidden' : '';
    }

    btn.addEventListener('click', toggleMenu);
    over.addEventListener('click', toggleMenu);

    document.querySelectorAll('.nav-item').forEach(link => {
      link.addEventListener('click', () => {
        if (window.innerWidth <= 768) {
          side.classList.remove('active');
          over.classList.remove('active');
          document.body.style.overflow = '';
        }
      });
    });

    // slider + dummy functions
    const signalLevelSlider = document.getElementById('signal-level');
    const signalLevelValue = document.getElementById('signal-level-value');
    signalLevelSlider.addEventListener('input', (e) => {
      signalLevelValue.textContent = e.target.value;
    });

    function exportAllData() { alert('Export All Data clicked'); }
    function importData() { alert('Import Data clicked'); }
    function clearAllData() { if(confirm('Clear all data?')) alert('Data cleared'); }
    function checkForUpdates() { alert('You are running the latest version.'); }

    document.addEventListener('change', (e) => {
      if (e.target.classList.contains('input-field') || e.target.classList.contains('select-field')) {
        console.log('Setting changed:', e.target.value);
      }
    });

    class SettingToggle extends HTMLElement {
      connectedCallback() {
        const label = this.getAttribute('label');
        const sub = this.getAttribute('sub');
        const active = this.hasAttribute('active');
        this.innerHTML = `
          <div class="flex items-center justify-between">
            <div>
              <div class="text-gray-800 font-medium">${label}</div>
              <div class="text-gray-600 text-sm">${sub}</div>
            </div>
            <div class="toggle-switch ${active ? 'active' : ''}" onclick="this.classList.toggle('active')">
              <div class="toggle-slider"></div>
            </div>
          </div>
        `;
      }
    }
    customElements.define('setting-toggle', SettingToggle);

    setInterval(() => {
      const el = document.getElementById('lastUpdated');
      if (el) el.textContent = new Date().toLocaleTimeString();
    }, 1000);
  </script>
</body>
</html>